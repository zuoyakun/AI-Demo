# AIGenTest - 智能测试方案协作平台

## 🎯 产品概述

AIGenTest是一个基于AI专家团队协作的智能测试方案生成平台，采用企业微信风格的聊天界面，通过7位专业AI专家的协作讨论，为用户生成完整、专业的测试方案报告。

### 核心特色
- 🧠 **智能对话分流**：自动识别测试vs普通对话，选择最优处理方式
- 🤖 **7位AI专家协作**：涵盖测试全流程的专业团队
- 💬 **企业微信风格界面**：专业、直观的协作体验  
- 🔄 **多轮上下文对话**：在同一项目中保持对话连续性
- 📊 **结构化测试方案**：不同章节的完整报告
- 🔍 **智能搜索增强**：实时获取最佳实践和技术文档
- 📜 **流畅滚动交互**：多种方式浏览所有专家建议
- ⚙️ **灵活配置管理**：支持自定义专家和参数调优

## 🚀 快速启动

### 服务器部署
```bash
# 1. 安装Flask
pip install flask

# 2. 启动服务器  
python start.py

# 3. 浏览器访问
http://localhost:8123
```

### 停止服务器
按 `Ctrl + C` 停止服务器

### 配置和使用
1. **配置API密钥**：
   - 点击左上角设置图标 ⚙️
   - 在"API设置"页面输入阿里云百炼API密钥
   - 点击"测试连接"验证状态
   - 保存配置

2. **开始测试项目**：
   - 点击"开始第一个项目"按钮
   - 描述测试需求，例如：
   ```
   我需要为一个电商网站制定完整的测试方案，包括：
   - 用户注册登录功能测试
   - 商品搜索和购买流程测试
   - 支付系统测试
   - 性能和安全测试
   ```
3. **发送消息**，AI专家团队将自动加入讨论

## 👨‍💼 AI专家团队

平台预设了7位专业AI专家，各自负责测试过程的不同环节：

| 专家 | 职责 | 专长领域 |
|------|------|----------|
| 🔍 **需求分析师** | 解析用户需求 | 需求分析、业务理解、用户体验、功能规格 |
| 📋 **测试策略师** | 设计测试方案 | 测试策略、测试计划、质量保证、测试架构 |
| 🛠️ **技术选型师** | 推荐工具链 | 测试工具、自动化框架、技术架构、工具链 |
| ⚠️ **风险控制师** | 识别质量问题 | 风险识别、质量控制、问题预防、安全测试 |
| 📚 **案例研究员** | 查找最佳实践 | 最佳实践、行业案例、经验总结、标准规范 |
| 💰 **成本评估师** | 估算资源投入 | 成本估算、资源规划、预算控制、效率优化 |
| 📄 **方案整合师** | 输出最终报告 | 方案整合、文档编写、流程设计、团队协调 |

### 协作机制
- **智能选择**：根据需求自动匹配合适的专家团队
- **有序讨论**：系统协调专家发言顺序，避免冲突
- **思考可视化**：点击"查看思考"了解专家分析过程
- **并行协作**：高优先级项目支持专家并行工作

## 💬 聊天功能详解

### 智能对话模式
平台会自动识别对话类型并选择最合适的处理方式：

**🧪 测试专家模式**：
- **触发条件**：涉及测试方案、测试计划、质量保证等测试相关内容
- **处理方式**：启动7位AI专家团队协作讨论
- **生成报告**：自动生成完整的测试方案报告
- **专业程度**：深度分析、多角度评估、结构化输出

**💬 普通对话模式**：
- **触发条件**：一般性咨询、技术问答、功能介绍等非测试场景
- **处理方式**：直接调用大模型快速回答
- **响应速度**：更快的响应，节省资源
- **上下文支持**：保持多轮对话连续性

**🔄 智能切换**：
- 同一项目中可自然切换两种模式
- 保持完整的对话历史记录
- 根据问题类型自动优化响应方式

### 消息类型
- **用户消息**：绿色气泡，右侧对齐
- **AI专家消息**：白色气泡，左侧对齐，带专家头像和姓名
- **系统消息**：灰色居中显示，提供流程提示

### 专家思考过程
每位专家回复前都会进行内部思考，包括：
- **问题分析**：从专业角度分析当前问题
- **解决方案**：基于专业知识提出建议
- **考虑因素**：识别风险和注意事项
- **协作建议**：与其他专家的协作点

点击专家消息旁的"**查看思考**"按钮可查看完整思考过程。

### 快捷操作
- **Enter**：发送消息
- **Shift + Enter**：换行
- **@专家**：提及特定专家，优先参与讨论
- **表情**：丰富的表情选择，增强交流体验

## 📜 智能滚动交互

### 滚动功能特性
- **增强滚动条**：8px宽度，渐变色设计，悬停放大效果
- **智能导航按钮**：
  - 回到顶部按钮（滚动超过300px时显示）
  - 滚动到底部按钮（距离底部超过300px时显示）
- **位置指示器**：右侧可视化显示当前滚动位置
- **新消息提醒**：用户不在底部时显示未读消息计数
- **平滑行为**：所有滚动操作都采用平滑动画

### 键盘快捷导航

| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `Home` | 滚动到顶部 | 快速跳转到对话开始 |
| `End` | 滚动到底部 | 快速跳转到最新消息 |
| `Page Up` | 向上翻页 | 滚动80%的可视区域 |
| `Page Down` | 向下翻页 | 滚动80%的可视区域 |
| `Ctrl + ↑` | 向上微调 | 精确控制，滚动50px |
| `Ctrl + ↓` | 向下微调 | 精确控制，滚动50px |

### 智能滚动行为
- **自动滚动**：新消息到达时智能判断是否自动滚动
- **用户状态感知**：检测用户是否在底部查看最新内容
- **消息类型区分**：用户消息总是自动滚动，AI消息根据用户位置决定
- **新消息计数**：准确统计用户未查看的新消息数量

### 操作提示
鼠标进入聊天区域1秒后，右上角会显示键盘快捷键提示，包含所有可用操作方式。

## 📊 测试方案报告

### 报告结构
生成的测试方案报告包含6个核心章节：

1. **项目概述** - 项目基本信息和特点
2. **需求分析** - 原始需求和关键功能点
3. **测试策略** - 整体测试方法和类型
4. **技术方案** - 推荐工具和实施步骤
5. **最佳实践** - 行业经验和建议
6. **专家建议** - 后续行动计划

> **说明**：风险评估、成本估算、时间安排、交付物等章节需要具体项目信息支撑，已从标准报告中移除，以确保内容的实用性和针对性。

### 报告功能
- **实时生成**：随着专家讨论进行，报告内容实时更新
- **结构化展示**：清晰的章节组织和内容层次
- **快速导航**：支持章节跳转和内容搜索
- **导出功能**：支持PDF/Word文档导出
- **分享链接**：生成可分享的报告链接

### 查看报告
- 点击右上角"**查看报告**"按钮
- 报告面板会在右侧滑出显示
- 支持折叠展开和快速导航
- 可复制特定章节内容

## ⚙️ 系统配置

### API设置
- **阿里云百炼API密钥**：必需，用于AI专家对话
- **API连接测试**：验证密钥有效性和连接状态
- **调用额度监控**：显示API使用统计
- **参数调优**：
  - 模型温度：控制回答的创新性（0-1）
  - 最大令牌数：控制回答长度（1000-4000）

### 搜索配置
- **Custom Search API密钥**：可选，增强专家知识库
- **搜索引擎ID**：Google自定义搜索引擎配置
- **搜索语言**：支持中文、英文和自动检测
- **结果数量**：控制每次搜索返回的结果数量

### 安全防护
- **提示词注入防护**：防止恶意用户操控AI专家行为
- **输入验证**：实时检测和过滤可疑输入内容
- **输出监控**：确保AI专家回复的安全性和专业性
- **安全等级设置**：低/中/高/严格四个等级可选
- **威胁检测**：识别角色操控、系统指令注入、越狱提示等攻击
- **安全日志**：记录和分析安全事件，支持查看和导出
- **实时防护**：自动拦截可疑输入，保护系统稳定运行

### 专家管理
- **预设专家**：7位系统专家，无法编辑
- **自定义专家**：用户可创建专业领域专家
  - 专家名称和角色设定
  - 专业领域描述
  - 能力标签和个性特征
  - 参与条件和优先级
- **专家参与设置**：
  - 最大参与专家数量（5-10）
  - 响应超时时间（10-120秒）
  - 自动选择专家开关

## 🔍 智能搜索增强

### 搜索能力
- **集成Google Custom Search**：获取最新技术文档和最佳实践
- **中英文检索**：支持中英文技术内容搜索
- **实时整合**：搜索结果直接引用到专家讨论中
- **智能筛选**：根据相关性自动排序和筛选结果

### 专家主动搜索
- **案例研究员**：主动搜索相关行业案例和最佳实践
- **技术选型师**：查找最新的测试工具和框架信息
- **风险控制师**：搜索安全漏洞和风险控制案例
- **成本评估师**：获取行业成本基准和效率数据

## 🧠 多轮思考机制

### 思考过程
每位AI专家在回复前都会进行深度思考：
1. **问题理解**：准确理解用户需求和上下文
2. **信息检索**：搜索相关知识和最佳实践
3. **方案分析**：评估不同解决方案的优劣
4. **风险评估**：识别潜在问题和注意事项
5. **协作考虑**：确定与其他专家的配合点

### 查看思考详情
- 点击专家消息旁的"**查看思考**"按钮
- 在弹窗中查看完整的思考过程
- 了解专家的分析逻辑和决策依据
- 获得更深入的专业洞察

## 🎨 界面功能特色

### 企业微信风格设计
- **左侧会话列表**：显示所有测试项目，支持搜索和筛选
- **右侧聊天区域**：专业的对话界面，消息类型清晰区分
- **企业蓝主题**：体现专业性和协作感
- **响应式布局**：支持桌面、平板、移动设备

### 交互动画
- **消息动画**：新消息淡入效果，专家头像跳动提醒
- **状态指示**：专家思考时的加载动画，进度实时显示
- **界面切换**：页面间平滑过渡，面板展开收起弹性效果
- **按钮反馈**：所有交互都有微动画反馈

### 会话管理
- **项目列表**：左侧显示所有测试项目，支持置顶和搜索
- **历史记录**：按时间排序，显示项目状态和关键信息
- **快速切换**：点击项目立即切换到对应会话
- **项目删除**：鼠标悬停项目显示删除按钮，支持单个删除和批量清理
- **数据持久化**：项目记录自动保存到本地，刷新页面不丢失
- **批量操作**：支持按天数批量清理旧项目和数据导出备份

## 🚀 使用技巧

### 提高测试方案质量
1. **详细描述需求**：提供越多信息，专家建议越精确
2. **分阶段提问**：先整体后细节，逐步深入讨论
3. **关注专家思考**：查看思考过程获得更多洞察
4. **及时保存报告**：重要方案及时导出备份

### 优化专家协作
1. **合理配置参与专家数**：避免过多专家造成混乱
2. **设置合适的超时时间**：平衡响应速度和质量
3. **添加专业领域专家**：针对特定技术栈定制专家
4. **利用搜索增强**：配置搜索API获得最新信息

### 高效项目管理
1. **使用清晰的项目标题**：便于后续查找和管理
2. **定期整理会话列表**：删除无用的测试项目
3. **善用搜索功能**：快速定位历史项目和内容
4. **利用滚动功能**：高效浏览长对话和多专家建议

## 🛠️ 技术特性

### 前端技术
- **纯HTML + CSS**：无框架依赖，高性能运行
- **Tailwind CSS**：现代化UI框架，响应式设计
- **原生JavaScript**：模块化架构，易于维护
- **Web Components**：可复用组件，扩展性强

### API集成
- **阿里云百炼API**：强大的AI对话和推理能力
- **Custom Search API**：实时信息搜索和知识增强
- **本地存储**：配置和会话数据持久化
- **错误处理**：完善的异常处理和优雅降级

### 性能优化
- **滚动优化**：平滑滚动，节流防抖，硬件加速
- **状态管理**：高效的状态缓存和更新机制
- **内存管理**：合理的组件生命周期管理
- **网络优化**：API调用优化，错误重试机制

## ❓ 常见问题

### Q: 如何配置API密钥？
A: 点击左上角设置图标，在"API设置"页面输入阿里云百炼API密钥，点击"测试连接"验证后保存。

### Q: 为什么只有需求分析师回复？
A: 通常是API密钥未配置或无效。请检查配置页面，确保API密钥正确并通过验证。系统会在未配置时提供基础建议。

### Q: 如何查看所有专家的建议？
A: 使用多种滚动方式：鼠标滚轮、拖拽滚动条、键盘快捷键（Home/End/PageUp/PageDown）、点击右侧导航按钮。

### Q: 滚动功能不工作怎么办？
A: 1) 检查浏览器控制台错误信息；2) 尝试刷新页面；3) 确认使用现代浏览器；4) 检查鼠标和键盘操作是否正常。

### Q: 如何添加自定义专家？
A: 在配置页面的"专家管理"中，点击"添加专家"，输入专家信息（名称、角色、专业领域、描述等）即可创建。

### Q: 报告导出功能如何使用？
A: 报告导出功能已完全可用：1) PDF导出：使用浏览器打印功能，支持完整样式；2) Word导出：自动下载.doc格式文件；3) 分享链接：一键复制到剪贴板。所有功能都需要先生成报告。

### Q: 如何删除不需要的项目？
A: 有多种删除方式：1) 在左侧项目列表中，鼠标悬停在项目上会显示删除按钮，点击即可删除单个项目；2) 在配置的"数据管理"中，可以按天数批量清理旧项目（如清理30天前的项目）；3) 在项目管理列表中查看所有项目详情并单独删除。删除前都会有确认对话框，确保不会误删。

### Q: 项目记录会自动保存吗？
A: 是的，系统会自动保存您的项目记录到浏览器本地存储。每次创建会话、发送消息时都会自动保存。即使关闭浏览器或刷新页面，您的项目记录也不会丢失。在配置页面的"数据管理"中可以查看存储状态、导出备份、清理旧数据等。

### Q: 安全防护功能如何使用？
A: 系统内置强大的安全防护功能：1) 自动启用，无需配置即可防护常见攻击；2) 在配置→安全防护中可调整防护等级和查看安全状态；3) 支持测试防护能力，验证当前配置有效性；4) 可查看安全日志，了解攻击趋势和防护效果；5) 严格模式下会临时禁用输入以应对高危威胁。

### Q: 什么是提示词注入攻击？
A: 提示词注入是一种试图操控AI行为的攻击方式，攻击者通过特殊输入试图让AI偏离预设角色或泄露系统信息。本系统通过多层防护机制有效识别和阻止此类攻击，确保AI专家始终保持专业身份和测试领域专长。

## 🎯 项目特色

✅ **完整的AI专家团队**：7位专业AI专家覆盖测试全流程  
✅ **企业级用户体验**：专业界面设计和流畅交互  
✅ **智能滚动功能**：多种方式浏览和导航专家建议  
✅ **结构化测试方案**：10个章节的完整专业报告  
✅ **灵活配置管理**：支持自定义专家和参数调优  
✅ **搜索功能增强**：实时获取最新技术信息和最佳实践  
✅ **思考过程透明**：了解AI专家的分析逻辑和决策过程  
✅ **本地数据持久化**：项目记录自动保存，支持导出备份和批量管理  
✅ **灵活项目管理**：支持单个删除、批量清理和跨设备数据同步  
✅ **企业级安全防护**：多层提示词注入防护，确保AI专家不被恶意操控  
✅ **智能威胁检测**：实时识别并阻止角色操控、系统指令注入等攻击  
✅ **跨设备支持**：桌面、平板、移动设备全兼容  

---

**立即开始使用AIGenTest，让AI专家团队为您的测试项目保驾护航！** 🚀